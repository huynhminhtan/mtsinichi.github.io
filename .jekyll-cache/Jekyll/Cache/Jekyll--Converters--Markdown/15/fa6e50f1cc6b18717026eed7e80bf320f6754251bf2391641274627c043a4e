I"e<p>Äá»ƒ thá»±c thi project Java thÃ´ng qua Docker cÃ³ nhiá»u cÃ¡ch, trong Ä‘Ã³ sá»­ dá»¥ng file Fat Jar lÃ  má»™t cÃ¡ch Ä‘Æ¡n giáº£n.</p>

<p>Tá»« project ban Ä‘áº§u, cÃ¡c báº¡n pháº£i táº¡o ra file Fat Jar, xem thÃªm cÃ¡ch táº¡o ra file Jar: <a href="/java/maven/2019/03/25/tao-file-fat-jar-tu-project-maven.html">Táº¡o Táº­p Tin Fat Jar Tá»« Project Maven</a></p>

<h1 id="cáº¥u-trÃºc-thÆ°-má»¥c">Cáº¥u trÃºc thÆ° má»¥c</h1>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>.
â”œâ”€â”€ dependency-reduced-pom.xml
â”œâ”€â”€ deploymavendocker.iml
â”œâ”€â”€ Dockerfile
â”œâ”€â”€ pom.xml
â”œâ”€â”€ src
â”‚   â”œâ”€â”€ main
â”‚   â”‚   â”œâ”€â”€ java
â”‚   â”‚   â”‚   â””â”€â”€ com
â”‚   â”‚   â”‚       â””â”€â”€ minhtan
â”‚   â”‚   â”‚           â””â”€â”€ core
â”‚   â”‚   â”‚               â””â”€â”€ OrderVerticle.java
â”‚   â”‚   â””â”€â”€ resources
â”‚   â””â”€â”€ test
â”‚       â””â”€â”€ java
â””â”€â”€ target
    â”œâ”€â”€ classes
    â”‚   â””â”€â”€ com
    â”‚       â””â”€â”€ minhtan
    â”‚           â””â”€â”€ core
    â”‚               â””â”€â”€ OrderVerticle.class
    â”œâ”€â”€ generated-sources
    â”‚   â””â”€â”€ annotations
    â”œâ”€â”€ maven.-1.0-SNAPSHOT.jar
    â”œâ”€â”€ maven-archiver
    â”‚   â””â”€â”€ pom.properties
    â”œâ”€â”€ maven-status
    â”‚   â””â”€â”€ maven-compiler-plugin
    â”‚       â”œâ”€â”€ compile
    â”‚       â”‚   â””â”€â”€ default-compile
    â”‚       â”‚       â”œâ”€â”€ createdFiles.lst
    â”‚       â”‚       â””â”€â”€ inputFiles.lst
    â”‚       â””â”€â”€ testCompile
    â”‚           â””â”€â”€ default-testCompile
    â”‚               â””â”€â”€ inputFiles.lst
    â””â”€â”€ original-maven.-1.0-SNAPSHOT.jar

23 directories, 12 files
</code></pre></div></div>

<h1 id="xÃ¢y-dá»±ng-dockerfile">XÃ¢y dá»±ng Dockerfile</h1>

<div class="language-dockerfile highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">FROM</span><span class="s"> openjdk:8-jre-alpine</span>

<span class="c"># Set file Jar need execute</span>
<span class="k">ENV</span><span class="s"> VERTICLE_FILE maven.-1.0-SNAPSHOT.jar</span>

<span class="c"># Set the location of the verticles</span>
<span class="k">ENV</span><span class="s"> VERTICLE_HOME /usr/verticles</span>

<span class="k">EXPOSE</span><span class="s"> 8080</span>

<span class="c"># Copy your fat jar to the container</span>
<span class="k">COPY</span><span class="s"> target/$VERTICLE_FILE $VERTICLE_HOME/</span>

<span class="c"># Launch the verticle</span>
<span class="k">WORKDIR</span><span class="s"> $VERTICLE_HOME</span>
<span class="k">ENTRYPOINT</span><span class="s"> ["sh", "-c"]</span>
<span class="k">CMD</span><span class="s"> ["exec java -jar $VERTICLE_FILE"]</span>
</code></pre></div></div>

<h1 id="build-vÃ -run-container">Build vÃ  Run container</h1>

<p>Build vá»›i tÃªn <em>sample/deploy-java-fat</em>:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker build <span class="nt">-t</span> sample/deploy-java-fat <span class="nb">.</span>
</code></pre></div></div>

<p>Run container, chiÃªm ngÆ°á»¡ng thÃ nh quáº£:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker run <span class="nt">-t</span> <span class="nt">-i</span> <span class="nt">-p</span> 8080:8080 sample/deploy-java-fat
</code></pre></div></div>

<h1 id="source-code">Source code</h1>

<p>Táº£i source code: <a href="/materials/deploy-maven-vertx-docker.zip">deploy-maven-vertx-docker.zip</a></p>

<h1 id="tham-kháº£o">Tham kháº£o</h1>

<p>https://vertx.io/docs/vertx-docker/#_deploying_a_fat_jar</p>

:ET